
mmm = [256, 1006.643026;
288, 843.096405;
320, 983.035085;
352, 769.657967;
384, 849.348683;
416, 674.916291;
448, 817.412655;
480, 656.983479;
512, 654.720624;
544, 464.392100;
576, 477.757440;
608, 382.021257;
640, 347.210596;
672, 331.052185;
704, 309.229199;
736, 284.777326;
768, 269.633909;
800, 256.641604;
832, 243.179641;
864, 233.122620;
896, 221.557480;
928, 206.595128;
960, 201.534419;
992, 194.138194;
1024, 192.772338;
1056, 188.112414;
1088, 185.533771;
1120, 184.091926;
1152, 181.498689;
1184, 180.543617;
1216, 178.259673;
1248, 177.566857;
1280, 176.428957;
1312, 175.002215;
1344, 172.996376;
1376, 170.913116;
1408, 171.596902;
1440, 170.465325;
1472, 169.759941;
1504, 169.285405;
1536, 168.382824;
1568, 168.248014;
1600, 169.571531;
1632, 167.783392;
1664, 167.027132;
1696, 167.834931;
1728, 166.668560;
1760, 165.222038;
1792, 166.662711;
1824, 164.835116;
1856, 162.848463;
1888, 162.334801;
1920, 162.685154;
1952, 161.847767;
1984, 164.370842;
2016, 161.933021;
2048, 161.343642];

gs = [512, 648.897859;
544, 645.635165;
576, 652.427723;
608, 651.898321;
640, 652.140094;
672, 652.154806;
704, 652.000954;
736, 651.064653;
768, 650.746146;
800, 650.907206;
832, 648.885502;
864, 646.593857;
896, 644.545291;
928, 640.704399;
960, 637.705227;
992, 632.662790;
1024, 638.177662;
1056, 633.602311;
1088, 632.383999;
1120, 631.806678;
1152, 631.516166;
1184, 631.706453;
1216, 630.501030;
1248, 631.746148;
1280, 625.180538;
1312, 629.376567;
1344, 629.340980;
1376, 629.292105;
1408, 629.732765;
1440, 629.960139;
1472, 629.388411;
1504, 625.798700;
1536, 632.710624;
1568, 630.425747;
1600, 630.649334;
1632, 630.468720;
1664, 630.649387;
1696, 619.568821;
1728, 623.999217;
1760, 627.525749;
1792, 631.660979;
1824, 631.118691;
1856, 616.743366;
1888, 627.982301;
1920, 629.559219;
1952, 629.639920;
1984, 622.637604;
2016, 631.150895;
2048, 635.785307];

plot(mmm(:,1),mmm(:,2), 'r*')
hold on
plot(gs(:,1), gs(:,2), 'b+')

xlabel('Matrix row/column size')
ylabel('MFLOPS')
title('MFLOP rate')
legend('Matrix-Matrix-Multiplication', 'Gauss-Seidel')
print -dpng mflops.png

pause
close all

tiled = [1, 113.204205;
2, 248.072860;
4, 547.362064;
8, 1073.741824;
16, 1248.537005;
32, 1447.742111;
64, 1079.137512;
128, 1077.333114;
256, 823.842726;
512, 496.336821;
1024, 192.541892];

tiled2 = [1, 102.370819;
2, 226.318940;
4, 484.030920;
8, 744.469324;
16, 925.639603;
32, 1032.030691;
64, 854.153356;
128, 773.055542;
256, 387.253833;
512, 265.764000;
1024, 188.430875];

semilogx(tiled(:,1), tiled(:,2), 'r*')
hold on
semilogx(tiled2(:,1), tiled2(:,2), 'b+')
xlabel('tile width n (logarithmic!)')
ylabel('MFLOPS')
title('Tiling and Cache')
legend('Matrices 1024x1024', 'Matrices 2048x2048')
xt=2.^(1:12);
xtl = [];
for i=xt
    xtl = [xtl; sprintf('%d', i)];
end
set(gca, 'xtick', xt, 'xticklabel', xtl)
print -dpng tiled.png

